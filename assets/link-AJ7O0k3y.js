import{a as se,r as o,b as oe,d as le,e as H,f as ce,g as ie,h as ue,i as K,k as de,l as U,m as fe}from"./index-64PUoUmh.js";const he="Error preloading route! ☝️";var pe=se();function me(r,m){const t=oe(),[i,v]=o.useState(!1),p=o.useRef(!1),l=le(m),{activeProps:y=()=>({className:"active"}),inactiveProps:A=()=>({}),activeOptions:s,to:T,preload:I,preloadDelay:B,hashScrollIntoView:O,replace:j,startTransition:V,resetScroll:W,viewTransition:$,children:w,target:d,disabled:n,style:g,className:b,onClick:P,onFocus:S,onMouseEnter:k,onMouseLeave:x,onTouchStart:E,ignoreBlocker:G,...J}=r,{params:ye,search:Te,hash:ge,state:be,mask:Pe,reloadDocument:Se,...C}=J,M=o.useMemo(()=>{try{return new URL(`${T}`),"external"}catch{}return"internal"},[T]),Q=H({select:e=>e.location.search,structuralSharing:!0});r={from:ce({strict:!1,select:e=>e.pathname}),...r};const c=o.useMemo(()=>t.buildLocation(r),[t,r,Q]),f=o.useMemo(()=>r.reloadDocument?!1:I??t.options.defaultPreload,[t.options.defaultPreload,I,r.reloadDocument]),X=B??t.options.defaultPreloadDelay??0,R=H({select:e=>{if(s!=null&&s.exact){if(!de(e.location.pathname,c.pathname,t.basepath))return!1}else{const a=U(e.location.pathname,t.basepath).split("/");if(!U(c.pathname,t.basepath).split("/").every((re,ne)=>re===a[ne]))return!1}return((s==null?void 0:s.includeSearch)??!0)&&!fe(e.location.search,c.search,{partial:!(s!=null&&s.exact),ignoreUndefined:!(s!=null&&s.explicitUndefined)})?!1:s!=null&&s.includeHash?e.location.hash===c.hash:!0}}),u=o.useCallback(()=>{t.preloadRoute(r).catch(e=>{console.warn(e),console.warn(he)})},[r,t]),Y=o.useCallback(e=>{e!=null&&e.isIntersecting&&u()},[u]);if(ie(l,Y,{rootMargin:"100px"},{disabled:!!n||f!=="viewport"}),ue(()=>{p.current||!n&&f==="render"&&(u(),p.current=!0)},[n,u,f]),M==="external")return{...C,ref:l,type:M,href:T,...w&&{children:w},...d&&{target:d},...n&&{disabled:n},...g&&{style:g},...b&&{className:b},...P&&{onClick:P},...S&&{onFocus:S},...k&&{onMouseEnter:k},...x&&{onMouseLeave:x},...E&&{onTouchStart:E}};const Z=e=>{if(!n&&!ve(e)&&!e.defaultPrevented&&(!d||d==="_self")&&e.button===0){e.preventDefault(),pe.flushSync(()=>{v(!0)});const a=t.subscribe("onResolved",()=>{a(),v(!1)});return t.navigate({...r,replace:j,resetScroll:W,hashScrollIntoView:O,startTransition:V,viewTransition:$,ignoreBlocker:G})}},F=e=>{n||f&&u()},ee=F,te=e=>{if(n)return;const a=e.target||{};if(f){if(a.preloadTimeout)return;a.preloadTimeout=setTimeout(()=>{a.preloadTimeout=null,u()},X)}},ae=e=>{if(n)return;const a=e.target||{};a.preloadTimeout&&(clearTimeout(a.preloadTimeout),a.preloadTimeout=null)},h=e=>a=>{var _;(_=a.persist)==null||_.call(a),e.filter(Boolean).forEach(z=>{a.defaultPrevented||z(a)})},D=R?K(y,{})??{}:{},L=R?{}:K(A,{}),N=[b,D.className,L.className].filter(Boolean).join(" "),q={...g,...D.style,...L.style};return{...C,...D,...L,href:n?void 0:c.maskedLocation?t.history.createHref(c.maskedLocation.href):t.history.createHref(c.href),ref:l,onClick:h([P,Z]),onFocus:h([S,F]),onMouseEnter:h([k,te]),onMouseLeave:h([x,ae]),onTouchStart:h([E,ee]),disabled:!!n,target:d,...Object.keys(q).length&&{style:q},...N&&{className:N},...n&&{role:"link","aria-disabled":!0},...R&&{"data-status":"active","aria-current":"page"},...i&&{"data-transitioning":"transitioning"}}}const Ee=o.forwardRef((r,m)=>{const{_asChild:t,...i}=r,{type:v,ref:p,...l}=me(i,m),y=typeof i.children=="function"?i.children({isActive:l["data-status"]==="active"}):i.children;return typeof t>"u"&&delete l.disabled,o.createElement(t||"a",{...l,ref:p},y)});function ve(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}export{Ee as L};
